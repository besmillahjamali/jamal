/**
 * =================================================================
 * I. TRANSLATION DATA
 * =================================================================
 * The 'translations' object holds all strings for multilingual support (French, English, Dari/Persian).
 * Keys are used throughout the application, and the values provide the content for each language.
 */
const translations = {
    "fr": {
        "home_title": "Besmillah JAMALI - Développeur Web",
        "home_tagline": "Créons ensemble des expériences digitales remarquables.",
        "home_subtagline": "Développeur Web | Designer Graphique",
        "cta_button_text": "Voir mes projets",
        "nav_home": "Accueil",
        "nav_about": "À Propos",
        "nav_skills": "Compétences",
        "nav_experience": "Expériences",
        "nav_projects": "Projets",
        "nav_contact": "Contact",
        "nav_blog": "Blog",
        "about_title": "À Propos - Besmillah JAMALI",
        "about_heading": "À Propos de Moi",
        "about_text": "Je m'appelle Besmillah Jamali, originaire d'Afghanistan, et mon parcours a été façonné par la persévérance, l'adaptabilité et une soif constante d'apprendre. J'ai grandi en Afghanistan, où les défis du quotidien m'ont appris que la véritable force réside dans le savoir, l'espoir et la détermination.\n\nMon intérêt pour un avenir durable m'a conduit à des études en ingénierie des énergies renouvelables. Ce choix académique n'était pas seulement une voie scientifique mais aussi une conviction profonde : celle de contribuer à un monde plus respectueux de l'environnement.\n\nParallèlement, j'ai développé une passion croissante pour le monde numérique. Aujourd'hui, je m'oriente vers le développement web et la programmation mobile, convaincu que la technologie est le langage du futur. Pour moi, chaque nouveau langage de programmation et chaque projet digital est une opportunité d'apprendre, d'innover et de construire des solutions utiles.\n\nMa curiosité ne s'arrête pas là : je m'intéresse également à l'investissement et à la technologie blockchain. Je vois ce domaine comme un secteur prometteur à l'intersection de la technologie et de l'économie, et comme un terrain idéal pour l'innovation et la croissance.\n\nDiscipliné, passionné et tourné vers l'avenir, je cherche constamment à élargir mes compétences, à relever de nouveaux défis et à faire le lien entre mes connaissances en ingénierie et le numérique. Mon ambition est claire : bâtir un pont entre tradition et modernité, entre énergie durable et monde digital, afin de contribuer activement à la création d'un avenir plus intelligent et plus durable.",
        "languages_heading": "Langues",
        "language_fr": "Français: Niveau intermédiaire (B1-B2)",
        "language_fa": "Dari (Persan): Langue maternelle",
        "language_en": "Anglais: Bon niveau (B2)",
        "language_tu": "Turc: A2",
        "skills_title": "Compétences - Besmillah JAMALI",
        "skills_heading": "Compétences Techniques",
        "skill_webdev": "Développement Web",
        "skill_graphic": "Design Graphique",
        "skill_mobile": "Développement Mobile",
        "skill_automation": "Automatisation & Bots",
        "skill_office": "Bureautique",
        "experience_title": "Expériences - Besmillah JAMALI",
        "experience_heading": "Expériences Professionnelles",
        "exp1_title": "Stage en Web Design (2 semaines)",
        "exp1_company": "Sumerod, Troyes - France",
        "exp1_li1": "Création de maquettes web pour un site vitrine",
        "exp1_li2": "Adaptation des pages au responsive design (mobile et tablette)",
        "exp1_li3": "Participation à la définition de l'identité visuelle (choix typographiques, couleurs, mise en page)",
        "exp2_title": "Stage Électricien bâtiment",
        "exp2_company": "Troyes, France",
        "exp2_li1": "Installation et test de systèmes électriques selon les plans",
        "exp2_li2": "Lecture de schémas et vérification de la sécurité des circuits",
        "exp3_title": "Employé Libre-service",
        "exp3_company": "Brico Dépôt, Troyes",
        "exp4_title": "Stage Assistant Web / Électrotechnique",
        "exp4_company": "Asia Consultances Group, Afghanistan",
        "exp4_li1": "Analyse de données, assistance technique, utilisation d'instruments de mesure",
        "project_title": "Projets - Besmillah JAMALI",
        "project_heading": "Mes Projets",
        "project_text": "Une sélection de mes travaux récents, démontrant mon approche de la conception centrée sur l'utilisateur et mon expertise technique.",
        "project1_title": "Maquettes Web pour un site vitrine",
        "project1_info": "Stage en Web Design, Sumerod, Troyes - 2025",
        "project1_text": "Au cours de ce stage, j'ai créé des maquettes complètes pour un site web d'entreprise, en veillant à l'adaptation au responsive design pour les appareils mobiles et les tablettes. J'ai également participé à la définition de l'identité visuelle, incluant le choix des couleurs et de la typographie.",
        "project2_title": "Applications Android",
        "project2_info": "Développement mobile avec Android Studio",
        "project2_text": "J'ai développé des applications Android en utilisant Kotlin et Java, en me concentrant sur la création d'interfaces utilisateur intuitives. Ces projets incluent le test et la publication d'applications en local pour validation.",
        "project3_title": "Bots d'automatisation Telegram",
        "project3_info": "Développement Python",
        "project3_text": "En utilisant Python, j'ai créé des bots pour la plateforme Telegram, intégrant des API externes (cryptomonnaies, etc.) pour automatiser diverses tâches. Ces bots sont hébergés sur des plateformes comme PythonAnywhere.",
        "contact_title": "Contact - Besmillah JAMALI",
        "contact_heading": "Contactez-Moi",
        "contact_text": "Intéressé par mon profil ou un projet ? N'hésitez pas à me contacter !",
        "contact_phone_heading": "Téléphone",
        "contact_phone_value": "07 80 45 70 56",
        "contact_email_heading": "Email",
        "contact_email_value": "jamalibesmillah@gmail.com",
        "contact_address_heading": "Adresse",
        "contact_address_value": "10600 La Chapelle Saint Luc",
        "blog_title": "Blog - Besmillah JAMALI",
        "blog_heading": "Blog",
        "blog_welcome_heading": "Bienvenue sur mon Blog",
        "blog_cat_home": "Accueil",
        "blog_cat_crypto": "Marché Crypto",
        "blog_cat_stocks": "Marché Boursier",
        "blog_cat_tech": "Nouvelles Tech",
        "blog_cat_webdev": "Dev Web",
        "blog_cat_energy": "Énergie Renouvelable",
        "crypto_page_title": "Marché Crypto - Besmillah JAMALI",
        "crypto_page_heading": "Données en Direct et Analyses du Marché Crypto",
        "crypto_heading_top10": "Top 10 Cryptos (24h)",
        "crypto_heading_overview": "Aperçu du Marché",
        "crypto_chart_note": "Un graphique ou une visualisation dynamique des capitalisations boursières ira ici.",
        "crypto_heading_analysis": "Analyse en Vedette",
        "crypto_more_articles": "Plus d'articles disponibles sur le blog principal.",
        "stocks_page_title": "Marché Boursier - Besmillah JAMALI",
        "stocks_heading_indices": "Principaux Indices Boursiers Mondiaux",
        "forex_heading_large": "Taux de Change Majeurs (USD, EUR, JPY)",
        "stocks_heading_analysis": "Analyse Boursière en Vedette",
        "tech_page_title": "Actualités Tech & Analyse - Besmillah JAMALI",
        "tech_heading_featured": "Histoire Tech en Vedette: IA, ML & Robotique",
        "tech_heading_webdev": "Tendances Dev Web & Frontend",
        "tech_heading_gadgets": "Actualités Gadgets & Matériel",
        "tech_heading_updates": "Dernières Mises à Jour Tech Globales",
        "tech_featured_title": "La Prochaine Ère de l'IA: De l'Intelligence Générale aux Agents Spécialisés",
        "tech_featured_summary": "Un examen détaillé du changement dans la recherche en IA et comment les modèles hautement spécialisés redéfinissent les industries, avec des implications pour le développement web et la finance.",
        "read_more": "Lire la Suite →",
        "energy_page_title": "Ingénierie Énergie Renouvelable - Besmillah JAMALI",
        "energy_heading_deep_dive": "Analyse Approfondie: Intégration Réseau & Stockage",
        "energy_heading_trends": "Tendances Émergentes en Énergie Renouvelable",
        "energy_heading_policy": "Mises à Jour Politiques & Marché",
        "energy_heading_metrics": "Métrique Clés de l'Énergie Mondiale",
        "energy_deep_dive_title": "Les Défis d'Ingénierie des Réseaux 100% Renouvelables",
        "energy_deep_dive_summary": "Une analyse technique détaillée de l'inertie, du contrôle de fréquence et du rôle des solutions de stockage avancé dans la stabilisation des systèmes électriques.",
        "webdev_page_title": "Développement Web & Codage - Besmillah JAMALI",
        "webdev_heading_frameworks": "Frameworks, Outils & Actualités Récents",
        "webdev_heading_cases": "Études de Cas & Projets en Vedette",
        "webdev_heading_guides": "Guides de Codage Essentiels",
        "webdev_case_title": "Étude de Cas: Construction d'une Plateforme E-commerce Haute Performance",
        "webdev_case_summary": "Un aperçu de l'architecture, de la pile technologique (MERN/JAMStack) et des optimisations de performance utilisées pour gérer des charges de trafic importantes.",
        "footer_social_call": "Suivez-moi sur les réseaux sociaux :",
        "all_rights": "&copy 2025 Besmillah JAMALI. Tous droits réservés.",
        "market_heading_overview": "Aperçu du Marché Mondial",
        "crypto_heading_section": "Résumé du Marché Crypto",
        "news_hot_heading": "Actualités Chaudes du Marché",
        "news_hot_content": "La pression à la baisse se poursuit sur les marchés mondiaux. La crypto et les principales bourses ont connu une volatilité significative en raison des tensions géopolitiques et des récents événements de liquidité. L'attention des investisseurs reste focalisée sur les rapports macroéconomiques américains.",
        "chart_total_market_heading": "Graphique de la Capitalisation Boursière Totale sur 24h",
        "indices_heading_section": "Indices Boursiers Mondiaux",
        "companies_heading_section": "Grandes Entreprises (Tech)",
        "forex_heading_section": "Paires Forex Majeures",
    },
    "en": {
        "home_title": "Besmillah JAMALI - Web Developer",
        "home_tagline": "Let's create remarkable digital experiences together.",
        "home_subtagline": "Web Developer | Graphic Designer",
        "cta_button_text": "View My Projects",
        "nav_home": "Home",
        "nav_about": "About",
        "nav_skills": "Skills",
        "nav_experience": "Experience",
        "nav_projects": "Projects",
        "nav_contact": "Contact",
        "nav_blog": "Blog",
        "about_title": "About - Besmillah JAMALI",
        "about_heading": "About Me",
        "about_text": "My name is Besmillah Jamali, originally from Afghanistan, and my journey has been shaped by perseverance, adaptability, and a constant thirst for learning. I grew up in Afghanistan, where the challenges of daily life taught me that true strength lies in knowledge, hope, and determination.\n\nMy interest in a sustainable future led me to pursue studies in renewable energy engineering. This academic choice was not only a scientific path but also a deep conviction: the belief in contributing to a world that respects the environment more.\n\nAt the same time, I developed a growing passion for the digital world. Today, I am moving toward web development and mobile programming, convinced that technology is the language of the future. For me, every new programming language and every digital project is an opportunity to learn, innovate, and build useful solutions.\n\nMy curiosity does not stop there: I am also interested in investment and blockchain technology. I see this field as a promising sector at the intersection of technology and economy, and as an ideal ground for innovation and growth.\n\nDisciplined, passionate, and future-oriented, I constantly seek to expand my skills, take on new challenges, and bridge my knowledge in engineering with digital technology. My ambition is clear: to build a bridge between tradition and modernity, between sustainable energy and the digital world, in order to actively contribute to creating a smarter and more sustainable future.",
        "languages_heading": "Languages",
        "language_fr": "French: Intermediate Level (B1-B2)",
        "language_fa": "Dari (Persian): Native Speaker",
        "language_en": "English: Good Level (B2)",
        "language_tu": "Turkish: A2",
        "skills_title": "Skills - Besmillah JAMALI",
        "skills_heading": "Technical Skills",
        "skill_webdev": "Web Development",
        "skill_graphic": "Graphic Design",
        "skill_mobile": "Mobile Development",
        "skill_automation": "Automation & Bots",
        "skill_office": "Office Suite",
        "experience_title": "Experience - Besmillah JAMALI",
        "experience_heading": "Professional Experience",
        "exp1_title": "Web Design Internship (2 weeks)",
        "exp1_company": "Sumerod, Troyes - France",
        "exp1_li1": "Creation of web mockups for a showcasing website",
        "exp1_li2": "Adaptation of pages to responsive design (mobile and tablet)",
        "exp1_li3": "Participation in defining the visual identity (typographical choices, colors, layout)",
        "exp2_title": "Building Electrician Internship",
        "exp2_company": "Troyes, France",
        "exp2_li1": "Installation and testing of electrical systems according to plans",
        "exp2_li2": "Reading schematics and verifying circuit safety",
        "exp3_title": "Self-Service Employee",
        "exp3_company": "Brico Dépôt, Troyes",
        "exp4_title": "Web / Electrotechnical Assistant Internship",
        "exp4_company": "Asia Consultances Group, Afghanistan",
        "exp4_li1": "Data analysis, technical assistance, use of measuring instruments",
        "project_title": "Projects - Besmillah JAMALI",
        "project_heading": "My Projects",
        "project_text": "A selection of my recent work, demonstrating my user-centered design approach and technical expertise.",
        "project1_title": "Web Design Mockups for a Showcasing Website",
        "project1_info": "Web Design Internship, Sumerod, Troyes - 2025",
        "project1_text": "During this internship, I created complete mockups for a company's website, ensuring adaptation to responsive design for mobile and tablet devices. I also participated in defining the visual identity, including the choice of colors and typography.",
        "project2_title": "Android Applications",
        "project2_info": "Mobile Development with Android Studio",
        "project2_text": "I developed Android applications using Kotlin and Java, focusing on creating intuitive user interfaces. These projects included testing and local publishing of applications for validation.",
        "project3_title": "Telegram Automation Bots",
        "project3_info": "Python Development",
        "project3_text": "Using Python, I created bots for the Telegram platform, integrating external APIs (cryptocurrency, etc.) to automate various tasks. These bots are hosted on platforms like PythonAnywhere.",
        "contact_title": "Contact - Besmillah JAMALI",
        "contact_heading": "Contact Me",
        "contact_text": "Interested in my profile or have a project in mind? Feel free to get in touch!",
        "contact_phone_heading": "Phone",
        "contact_phone_value": "07 80 45 70 56",
        "contact_email_heading": "Email",
        "contact_email_value": "jamalibesmillah@gmail.com",
        "contact_address_heading": "Address",
        "contact_address_value": "10600 La Chapelle Saint Luc",
        "blog_title": "Blog - Besmillah JAMALI",
        "blog_heading": "Blog",
        "blog_welcome_heading": "Welcome to My Blog",
        "blog_cat_home": "Home",
        "blog_cat_crypto": "Crypto Market",
        "blog_cat_stocks": "Stock Market",
        "blog_cat_tech": "Tech News",
        "blog_cat_webdev": "Web Dev",
        "blog_cat_energy": "Renewable Energy",
        "crypto_page_title": "Crypto Market - Besmillah JAMALI",
        "crypto_page_heading": "Crypto Market Live Data & Insights",
        "crypto_heading_top10": "Top 10 Cryptos (24h)",
        "crypto_heading_overview": "Market Overview",
        "crypto_chart_note": "A chart or dynamic market cap visualization will go here.",
        "crypto_heading_analysis": "Featured Analysis",
        "crypto_more_articles": "More articles available in the main blog.",
        "stocks_page_title": "Stock Market - Besmillah JAMALI",
        "stocks_heading_indices": "Major Global Stock Indices",
        "forex_heading_large": "Major Forex Rates (USD, EUR, JPY)",
        "stocks_heading_analysis": "Featured Stock Analysis",
        "tech_page_title": "Tech News & Analysis - Besmillah JAMALI",
        "tech_heading_featured": "Featured Tech Story: AI, ML & Robotics",
        "tech_heading_webdev": "Web Dev & Frontend Trends",
        "tech_heading_gadgets": "Gadgets & Hardware News",
        "tech_heading_updates": "Latest Global Tech Updates",
        "tech_featured_title": "The Next Era of AI: From General Intelligence to Specialized Agents",
        "tech_featured_summary": "A detailed look at the shift in AI research and how highly specialized models are reshaping industries, with implications for web development and finance.",
        "read_more": "Read More →",
        "energy_page_title": "Renewable Energy Engineering - Besmillah JAMALI",
        "energy_heading_deep_dive": "Deep Dive: Grid Integration & Storage Solutions",
        "energy_heading_trends": "Emerging Renewable Trends",
        "energy_heading_policy": "Policy & Market Updates",
        "energy_heading_metrics": "Key Global Energy Metrics",
        "energy_deep_dive_title": "The Engineering Challenges of 100% Renewable Grids",
        "energy_deep_dive_summary": "A technical breakdown of inertia, frequency control, and the role of advanced battery and pumped hydro storage in stabilizing power systems.",
        "webdev_page_title": "Web Development & Coding - Besmillah JAMALI",
        "webdev_heading_frameworks": "Latest Frameworks, Tools & News",
        "webdev_heading_cases": "Featured Case Studies & Projects",
        "webdev_heading_guides": "Essential Coding Guides",
        "webdev_case_title": "Case Study: Building a High-Performance E-commerce Platform",
        "webdev_case_summary": "An overview of the architecture, technology stack (MERN/JAMStack) and performance optimizations used to handle high traffic loads.",
        "footer_social_call": "Follow me on social media:",
        "all_rights": "&copy 2025 Besmillah JAMALI. All Rights Reserved.",
        "market_heading_overview": "Global Market Overview",
        "crypto_heading_section": "Crypto Market Summary",
        "news_hot_heading": "Hot Market News",
        "news_hot_content": "Downward pressure continues on global markets. Crypto and major stock exchanges faced significant volatility due to geopolitical tensions and recent liquidity events. Investors' focus remains on US macroeconomic reports.",
        "chart_total_market_heading": "24h Global Market Cap Chart",
        "indices_heading_section": "Global Stock Indices",
        "companies_heading_section": "Major Companies (Tech)",
        "forex_heading_section": "Major Forex Pairs",
    },
    "fa": {
        "home_title": "بسم الله جمالی - توسعه دهنده وب",
        "home_tagline": "بیایید با هم تجربه های دیجیتالی فوق العاده بسازیم.",
        "home_subtagline": "توسعه دهنده وب | طراح گرافیک",
        "cta_button_text": "مشاهده پروژه‌های من",
        "nav_home": "صفحه اصلی",
        "nav_about": "درباره من",
        "nav_skills": "مهارت ها",
        "nav_experience": "تجارب",
        "nav_projects": "پروژه ها",
        "nav_contact": "تماس",
        "nav_blog": "بلاگ",
        "about_title": "درباره من - بسم الله جمالی",
        "about_heading": "درباره من",
        "about_text": "نام من بسم الله جمالی است، اصالتاً اهل افغانستان هستم و مسیر زندگی‌ام با پشتکار، سازگاری و عطش همیشگی برای یادگیری شکل گرفته است. در افغانستان بزرگ شدم، جایی که چالش‌های روزمره به من آموخت که قدرت واقعی در دانش، امید و اراده نهفته است.\n\nعلاقه من به آینده‌ای پایدار باعث شد تا در رشته مهندسی انرژی‌های تجدیدپذیر تحصیل کنم. این انتخاب تحصیلی نه تنها یک مسیر علمی بود بلکه یک باور عمیق: مشارکت در ساخت جهانی که بیشتر به محیط زیست احترام می‌گذارد.\n\nهمزمان، علاقه‌ام به دنیای دیجیتال نیز رشد کرد. امروز به سمت توسعه وب و برنامه‌نویسی موبایل حرکت می‌کنم، زیرا معتقدم فناوری زبان آینده است. برای من، هر زبان برنامه‌نویسی جدید و هر پروژه دیجیتال فرصتی برای یادگیری، نوآوری و ساخت راه‌حل‌های مفید است.\n\nکنجکاوی من به همین جا ختم نمی‌شود: به سرمایه‌گذاری و فناوری بلاکچین نیز علاقه‌مندم. این حوزه را در تقاطع فناوری و اقتصاد، زمینه‌ای نویدبخش برای نوآوری و رشد می‌بینم.\n\nمنظم، پرشور و آینده‌نگر هستم و همواره به دنبال گسترش مهارت‌ها، پذیرش چالش‌های جدید و پیوند دانش مهندسی با فناوری دیجیتال هستم. هدفم روشن است: ساخت پلی میان سنت و مدرنیته، میان انرژی پایدار و دنیای دیجیتال، تا به طور فعال در خلق آینده‌ای هوشمندتر و پایدارتر سهیم باشم.",
        "languages_heading": "زبان‌ها",
        "language_fr": "فرانسوی: سطح متوسط (B1-B2)",
        "language_fa": "دری (فارسی): زبان مادری",
        "language_en": "انگلیسی: سطح خوب (B2)",
        "language_tu": "ترکی: A2",
        "skills_title": "مهارت‌ها - بسم الله جمالی",
        "skills_heading": "مهارت های فنی",
        "skill_webdev": "توسعه وب",
        "skill_graphic": "طراحی گرافیک",
        "skill_mobile": "توسعه موبایل",
        "skill_automation": "اتوماسیون و ربات‌ها",
        "skill_office": "نرم‌افزارهای اداری",
        "experience_title": "تجارب - بسم الله جمالی",
        "experience_heading": "تجارب شغلی",
        "exp1_title": "دوره کارآموزی طراحی وب (۲ هفته)",
        "exp1_company": "Sumerod, Troyes - France",
        "exp1_li1": "ایجاد ماکت‌های وب برای یک وب‌سایت ویترین",
        "exp1_li2": "انطباق صفحات با طراحی واکنش‌گرا (موبایل و تبلت)",
        "exp1_li3": "مشارکت در تعریف هویت بصری (انتخاب‌های تایپوگرافی، رنگ‌ها، چیدمان)",
        "exp2_title": "دوره کارآموزی برقکاری ساختمان",
        "exp2_company": "Troyes, France",
        "exp2_li1": "نصب و تست سیستم‌های برقی مطابق با نقشه‌ها",
        "exp2_li2": "خواندن نقشه‌ها و بررسی ایمنی مدارهای برق",
        "exp3_title": "کارمند فروشگاه",
        "exp3_company": "Brico Dépôt, Troyes",
        "exp4_title": "دوره کارآموزی دستیار وب / الکتروتکنیک",
        "exp4_company": "Asia Consultances Group, Afghanistan",
        "exp4_li1": "تجزیه و تحلیل داده‌ها، کمک فنی، استفاده از ابزارهای اندازه‌گیری",
        "project_title": "پروژه ها - بسم الله جمالی",
        "project_heading": "پروژه‌های من",
        "project_text": "مجموعه ای از کارهای اخیر من که رویکرد طراحی کاربر محور و تخصص فنی من را نشان می دهد.",
        "project1_title": "ماکت‌های وب برای یک وب‌سایت ویترین",
        "project1_info": "دوره کارآموزی طراحی وب، Sumerod، Troyes - 2025",
        "project1_text": "در طول این دوره، من ماکت‌های کاملی برای یک وب‌سایت شرکتی ایجاد کردم و از سازگاری آن با طراحی واکنش‌گرا برای دستگاه‌های موبایل و تبلت اطمینان حاصل کردم. همچنین در تعریف هویت بصری، شامل انتخاب رنگ‌ها و تایپوگرافی، مشارکت داشتم.",
        "project2_title": "برنامه های اندروید",
        "project2_info": "توسعه موبایل با Android Studio",
        "project2_text": "من با استفاده از کاتلین و جاوا، برنامه های اندروید را توسعه دادم و بر روی ایجاد رابط های کاربری بصری تمرکز کردم. این پروژه ها شامل تست و انتشار محلی برنامه ها برای اعتبار سنجی بودند.",
        "project3_title": "بات‌های اتوماسیون تلگرام",
        "project3_info": "توسعه پایتون",
        "project3_text": "با استفاده از پایتون، بات هایی را برای پلتفرم تلگرام ایجاد کردم و برای خودکارسازی کارهای مختلف، API های خارجی (مانند ارزهای دیجیتال) را در آنها ادغام کردم. این ربات‌ها بر روی پلتفرم‌هایی مانند PythonAnywhere میزبانی می‌شوند.",
        "contact_title": "تماس - بسم الله جمالی",
        "contact_heading": "تماس با من",
        "contact_text": "به پروفایل من یا پروژه هایم علاقه مند هستید؟ می‌توانید به راحتی با من در تماس باشید!",
        "contact_phone_heading": "تلفن",
        "contact_phone_value": "07 80 45 70 56",
        "contact_email_heading": "ایمیل",
        "contact_email_value": "jamalibesmillah@gmail.com",
        "contact_address_heading": "آدرس",
        "contact_address_value": "10600 La Chapelle Saint Luc",
        "blog_title": "بلاگ - بسم الله جمالی",
        "blog_heading": "بلاگ",
        "blog_welcome_heading": "به بلاگ من خوش آمدید",
        "blog_cat_home": "خانه",
        "blog_cat_crypto": "مارکت کریپتو",
        "blog_cat_stocks": "مارکت سهام",
        "blog_cat_tech": "اخبار تکنالوژی",
        "blog_cat_webdev": "توسعه وب",
        "blog_cat_energy": "انرژی تجدیدپذیر",
        "crypto_page_title": "مارکت کریپتو - بسم الله جمالی",
        "crypto_page_heading": "تحلیل و داده‌های زنده بازار کریپتو",
        "crypto_heading_top10": "۱۰ ارز برتر (۲۴ ساعت)",
        "crypto_heading_overview": "نمای کلی بازار",
        "crypto_chart_note": "یک نمودار یا ویژوالایزیشن پویای ارزش بازار در اینجا قرار خواهد گرفت.",
        "crypto_heading_analysis": "تحلیل‌های برجسته",
        "crypto_more_articles": "مقالات بیشتر در بلاگ اصلی موجود است.",
        "stocks_page_title": "بازار سهام - بسم الله جمالی",
        "stocks_heading_indices": "شاخص‌های اصلی سهام جهانی",
        "forex_heading_large": "نرخ ارزهای اصلی (دلار، یورو، ین)",
        "stocks_heading_analysis": "تحلیل‌های برجسته سهام",
        "tech_page_title": "اخبار و تحلیل فناوری - بسم الله جمالی",
        "tech_heading_featured": "داستان برجسته فناوری: هوش مصنوعی، یادگیری ماشین و رباتیک",
        "tech_heading_webdev": "ترندهای توسعه وب و فرانت‌اند",
        "tech_heading_gadgets": "اخبار گجت‌ها و سخت‌افزار",
        "tech_heading_updates": "آخرین به‌روزرسانی‌های جهانی فناوری",
        "tech_featured_title": "عصر بعدی هوش مصنوعی: از هوش عمومی تا عوامل تخصصی",
        "tech_featured_summary": "نگاهی عمیق به تغییرات در تحقیقات هوش مصنوعی و اینکه چگونه مدل‌های بسیار تخصصی، صنایع را دگرگون می‌کنند، با پیامدهایی برای توسعه وب و امور مالی.",
        "read_more": "بیشتر بخوانید ←",
        "energy_page_title": "مهندسی انرژی تجدیدپذیر - بسم الله جمالی",
        "energy_heading_deep_dive": "تحلیل عمیق: ادغام شبکه و راه‌حل‌های ذخیره‌سازی",
        "energy_heading_trends": "روندهای نوظهور انرژی تجدیدپذیر",
        "energy_heading_policy": "به‌روزرسانی‌های سیاست‌گذاری و بازار",
        "energy_heading_metrics": "معیارهای کلیدی انرژی جهانی",
        "energy_deep_dive_title": "چالش‌های مهندسی شبکه‌های ۱۰۰٪ تجدیدپذیر",
        "energy_deep_dive_summary": "تجزیه و تحلیل فنی اینرسی، کنترل فرکانس و نقش ذخیره‌سازی پیشرفته باتری و هیدروپمپ در تثبیت سیستم‌های قدرت.",
        "webdev_page_title": "توسعه وب و کدنویسی - بسم الله جمالی",
        "webdev_heading_frameworks": "جدیدترین فریمورک‌ها، ابزارها و اخبار",
        "webdev_heading_cases": "مطالعات موردی و پروژه‌های برجسته",
        "webdev_heading_guides": "راهنماهای کدنویسی ضروری",
        "webdev_case_title": "مطالعه موردی: ساخت یک پلتفرم تجارت الکترونیک با عملکرد بالا",
        "webdev_case_summary": "مروری بر معماری، پشته فناوری (MERN/JAMStack) و بهینه‌سازی عملکردی که برای مدیریت بارهای ترافیکی بالا استفاده می‌شود.",
        "footer_social_call": "در شبکه‌های اجتماعی من را دنبال کنید:",
        "all_rights": "&copy ۲۰۲۵ بسم الله جمالی. تمامی حقوق محفوظ است.",
        "market_heading_overview": "نمای کلی بازارهای جهانی",
        "crypto_heading_section": "خلاصه بازار کریپتو",
        "news_hot_heading": "اخبار داغ روز",
        "news_hot_content": "فشار نزولی بر بازارهای جهانی ادامه دارد. کریپتو و بورس‌های اصلی تحت تأثیر تنش‌های ژئوپلیتیک و نقدینگی‌های اخیر، با نوسانات قابل توجهی همراه بوده‌اند. توجه سرمایه‌گذاران به گزارش‌های اقتصادی کلان آمریکا جلب شده است.",
        "chart_total_market_heading": "نمودار ۲۴ ساعته ارزش کل بازار",
        "indices_heading_section": "شاخص‌های بورس جهانی",
        "companies_heading_section": "شرکت‌های بزرگ (فناوری)",
        "forex_heading_section": "جفت‌ارزهای اصلی (فارکس)",
    }
};

/**
 * =================================================================
 * II. LANGUAGE & THEME MANAGEMENT
 * =================================================================
 */

/**
 * Updates all text elements on the page based on the selected language,
 * sets body direction (LTR/RTL), and saves the choice to local storage.
 * @param {string} lang - The language code ('fr', 'en', 'fa').
 */
const setLanguage = (lang) => {
    localStorage.setItem('selectedLanguage', lang);
    document.documentElement.lang = lang;
    document.body.dir = (lang === 'fa') ? 'rtl' : 'ltr';

    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            element.innerHTML = translations[lang][key];
        }
    });

    const titleElement = document.querySelector('title');
    const titleKey = titleElement.getAttribute('data-i18n');
    if (titleElement && translations[lang] && translations[lang][titleKey]) {
        titleElement.textContent = translations[lang][titleKey];
    }

    const mainLangBtn = document.querySelector('.main-lang-btn');
    if (mainLangBtn) {
        mainLangBtn.textContent = lang.toUpperCase();
    }
};

/**
 * Sets the website's visual theme (e.g., 'dark', 'light'),
 * applies the corresponding CSS class to the body, and updates button states.
 * @param {string} theme - The theme name (e.g., 'dark', 'light', 'custom').
 */
const setTheme = (theme) => {
    localStorage.setItem('selectedTheme', theme);
    document.body.className = '';
    if (theme !== 'dark') {
        document.body.classList.add(`${theme}-theme`);
    }

    document.querySelectorAll('.theme-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    const activeThemeBtn = document.querySelector(`[data-theme="${theme}"]`);
    if (activeThemeBtn) {
        activeThemeBtn.classList.add('active');
    }

    const mainThemeBtn = document.querySelector('.main-theme-btn');
    if (mainThemeBtn) {
        mainThemeBtn.textContent = theme.charAt(0).toUpperCase() + theme.slice(1);
    }
}


/**
 * =================================================================
 * III. HERO SLIDESHOW
 * =================================================================
 */
let slideIndex = 0;

/**
 * Controls the automatic slideshow for the hero section, changing the image every 5 seconds.
 */
const showSlides = () => {
    const slides = document.getElementsByClassName("my-slides");
    if (slides.length > 0) {
        for (let i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slideIndex++;
        if (slideIndex > slides.length) {
            slideIndex = 1;
        }
        slides[slideIndex - 1].style.display = "block";
    }
    setTimeout(showSlides, 5000); // Change image every 5 seconds
};

/**
 * =================================================================
 * IV. BLOG MODULE: CATEGORY FILTERING & API FETCH
 * =================================================================
 */

// Placeholder API endpoints (some use 'demo' keys and will require replacement)
const apis = {
    crypto: "https://api.coingecko.com/api/v3/status_updates",
    energy: "https://newsdata.io/api/1/news?apikey=pub_28644e7b1b38b18c612fc245ad44195b69c1&q=renewable%20energy&language=fr",
    webdev: "https://newsapi.org/v2/everything?q=web%20development&language=fr&apiKey=demo", // Replace 'demo' with your key
    "tech-news": "https://gnews.io/api/v4/search?q=intelligence%20artificielle&lang=fr&token=demo", // Replace 'demo'
    stocks: "https://financialmodelingprep.com/api/v3/stock_news?limit=3&apikey=demo"
};


/**
 * Starts a simple auto-sliding functionality for a list of blog cards.
 * @param {HTMLElement[]} cardList - List of card elements to animate.
 */
function startSlider(cardList) {
    if (cardList.length <= 1) return;
    let index = 0;
    setInterval(() => {
        cardList.forEach((card, i) => {
            // Animates the cards horizontally to show the next one
            card.style.transform = `translateX(${(i - index) * 340}px)`;
        });
        index = (index + 1) % cardList.length;
    }, 4000);
}

/**
 * Fetches and displays data for the Crypto Market page using the CoinGecko API.
 * Populates Top 10 assets and Trending Coins sections.
 */
const fetchCryptoPageData = async () => {
    const topAssetsContainer = document.getElementById('top-crypto-prices');
    const trendingContainer = document.getElementById('trending-coins');

    if (!topAssetsContainer || !trendingContainer) return;

    const top10Url = 'https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=10&page=1&sparkline=false&price_change_percentage=24h';
    const trendingUrl = 'https://api.coingecko.com/api/v3/search/trending';

    try {
        const [top10Response, trendingResponse] = await Promise.all([
            fetch(top10Url),
            fetch(trendingUrl)
        ]);

        // --- Process Top 10 Cryptos ---
        if (top10Response.ok) {
            const data = await top10Response.json();
            let assetsHtml = '';

            data.forEach(coin => {
                if (coin.current_price && coin.price_change_percentage_24h !== null) {
                    const price = coin.current_price.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
                    const change24h = coin.price_change_percentage_24h.toFixed(2);
                    const isPositive = parseFloat(change24h) >= 0;

                    assetsHtml += `
                        <button class="crypto-item-btn" data-coin-id="${coin.id}" onclick="openCoinModal('${coin.id}')">
                            <div class="item-info">
                                <img src="${coin.image}" alt="${coin.name} Icon" class="coin-icon">
                                <span>${coin.name} (${coin.symbol.toUpperCase()})</span>
                            </div>
                            <div class="item-data">
                                <span class="price-value">$${price}</span>
                                <span class="price-change ${isPositive ? 'positive' : 'negative'}">
                                    ${isPositive ? '▲' : '▼'} ${change24h}%
                                </span>
                            </div>
                        </button>
                    `;
                }
            });
            topAssetsContainer.innerHTML = assetsHtml;
        } else {
            topAssetsContainer.innerHTML = `<p class="negative">Error loading Top 10 data: ${top10Response.status}</p>`;
        }

        // --- Process Trending Coins ---
        if (trendingResponse.ok) {
            const data = await trendingResponse.json();
            let trendingHtml = '';

            data.coins.slice(0, 5).forEach(item => {
                const coin = item.item;
                trendingHtml += `
                    <div class="data-item trending-item">
                        <div class="item-info">
                            <span class="rank"> ${coin.score + 1}</span>
                            <img src="${coin.thumb}" alt="${coin.name} Icon" class="coin-icon small">
                            <a href="https://www.coingecko.com/en/coins/${coin.id}" target="_blank">
                                ${coin.name} (${coin.symbol.toUpperCase()})
                            </a>
                        </div>
                    </div>
                `;
            });
            trendingContainer.innerHTML = trendingHtml;
        } else {
            trendingContainer.innerHTML = `<p class="negative">Error loading Trending data: ${trendingResponse.status}</p>`;
        }
    } catch (error) {
        console.error("A network or fetch error occurred:", error);
        topAssetsContainer.innerHTML = `<p class="negative">Connection Error: Could not reach CoinGecko API. (Check Console)</p>`;
        trendingContainer.innerHTML = `<p class="negative">Connection Error: Could not reach CoinGecko API. (Check Console)</p>`;
    }
    // Highlight the active category (assuming a function exists)
    // highlightActiveCategory();
};

/**
 * Fetches and displays data for the Stock Market page using placeholders.
 * Populates Major Indices and Major Forex Rates sections.
 */
const fetchStockPageData = async () => {
    // 1. Fetch Major Indices (Using placeholder data)
    const indices = {
        'S&P 500': 'SPX', 'NASDAQ': 'IXIC', 'Dow Jones': 'DJI',
        'FTSE 100 (London)': 'FTSE', 'CAC 40 (Paris)': 'CAC', 'DAX (Frankfurt)': 'DAX',
    };
    const indicesContainer = document.getElementById('major-stock-indices');
    let indicesHtml = '';

    try {
        for (const [name] of Object.entries(indices)) {
            const price = (Math.random() * 200 + 1000).toFixed(2);
            const changePercent = (Math.random() * 3 - 1.5).toFixed(2);
            const isPositive = parseFloat(changePercent) >= 0;

            indicesHtml += `
                <div class="data-item">
                    <span>${name}</span>
                    <span>${price}</span>
                    <span class="price-change ${isPositive ? 'positive' : 'negative'}">
                        ${isPositive ? '▲' : '▼'} ${changePercent}%
                    </span>
                </div>
            `;
        }
    } catch (error) {
        console.error("Error fetching stock indices data:", error);
        indicesHtml = `<p class="negative">Failed to load index data.</p>`;
    }
    if (indicesContainer) indicesContainer.innerHTML = indicesHtml;


    // 2. Fetch Forex Rates (Large Block - Using placeholder data)
    const pairs = ['EURUSD', 'USDJPY', 'GBPUSD', 'AUDUSD', 'USDCAD', 'USDCHF'];
    const forexContainer = document.getElementById('forex-rates-large');
    let forexHtml = '';

    try {
        for (const pair of pairs) {
            const rate = (Math.random() * 0.5 + 1.0).toFixed(4);
            const changePercent = (Math.random() * 0.8 - 0.4).toFixed(2);
            const isPositive = parseFloat(changePercent) >= 0;

            forexHtml += `
                <div class="data-item">
                    <span>${pair.replace('USD', '/USD ')}</span>
                    <span>${rate}</span>
                    <span class="price-change ${isPositive ? 'positive' : 'negative'}">
                        ${isPositive ? '▲' : '▼'} ${changePercent}%
                    </span>
                </div>
            `;
        }
    } catch (error) {
        console.error("Error fetching forex data:", error);
        forexHtml = `<p class="negative">Failed to load forex data.</p>`;
    }
    if (forexContainer) forexContainer.innerHTML = forexHtml;
};

/**
 * Populates the Renewable Energy dashboard with simulated key metrics.
 */
const fetchEnergyPageData = async () => {
    const metricsContainer = document.getElementById('energy-metrics');
    if (!metricsContainer) return;

    const metricsData = {
        'Global Renewable Capacity (GW)': '3300',
        'Solar Growth Rate (YoY)': '+28.5%',
        'Wind Offshore Capacity (GW)': '65',
        'Cost of Solar (LCOE - $/MWh)': '35.00',
        'Global EV Sales Share': '18.0%',
        'Energy Storage Deployed (GWh)': '200',
    };
    let metricsHtml = '';

    try {
        for (const [name, value] of Object.entries(metricsData)) {
            // Simple logic for visual indicator
            const isPositive = name.includes('Growth') || name.includes('Capacity') || name.includes('Sales');

            metricsHtml += `
                <div class="data-item">
                    <span>${name}</span>
                    <span>${value}</span>
                    <span class="price-change ${isPositive ? 'positive' : 'neutral'}">
                        ${isPositive ? '↑' : ''}
                    </span>
                </div>
            `;
        }
    } catch (error) {
        console.error("Error fetching energy metrics data:", error);
        metricsHtml = `<p class="negative">Failed to load energy metrics data.</p>`;
    }
    metricsContainer.innerHTML = metricsHtml;

    // highlightActiveCategory(); // assuming a function exists
};

/**
 * Placeholder function for the Tech News page. Content is primarily static.
 */
const fetchTechPageData = () => {
    // highlightActiveCategory(); // assuming a function exists
};

/**
 * Placeholder function for the Web Development page. Content is primarily static.
 */
const fetchWebDevPageData = () => {
    // highlightActiveCategory(); // assuming a function exists
};


/**
 * =================================================================
 * VI. CRYPTO MODAL (Details and Chart)
 * =================================================================
 * Functions for opening, closing, and populating the crypto detail modal.
 */

/**
 * Opens the coin detail modal, sets up the default timeframe, and initiates data loading.
 * @param {string} coinId - The CoinGecko ID of the cryptocurrency.
 */
const openCoinModal = async (coinId) => {
    if (!coinDetailModal) return;

    coinDetailModal.style.display = 'block';
    document.body.classList.add('modal-open');

    // Set 24h as default active timeframe
    document.querySelectorAll('.timeframe-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelector('.timeframe-btn[data-days="1"]')?.classList.add('active');

    await loadCoinDetails(coinId, 1); // 1 day default

    // Attach click listeners for timeframe buttons
    document.querySelectorAll('.timeframe-btn').forEach(button => {
        button.onclick = async (event) => {
            document.querySelectorAll('.timeframe-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            const days = event.target.getAttribute('data-days');
            await loadCoinDetails(coinId, days);
        };
    });
};

/**
 * Closes the coin detail modal and cleans up the Chart.js instance.
 */
const closeCoinModal = () => {
    if (coinDetailModal) coinDetailModal.style.display = 'none';
    document.body.classList.remove('modal-open');
    // Destroy old chart instance to prevent memory leaks
    if (chartInstance) {
        chartInstance.destroy();
        chartInstance = null;
    }
};

/**
 * Fetches detailed coin data and price chart history from the CoinGecko API.
 * Updates the modal content and renders the chart using Chart.js.
 * @param {string} coinId - The CoinGecko ID of the cryptocurrency.
 * @param {number} days - The historical time range in days (1, 7, 30, etc.).
 */
const loadCoinDetails = async (coinId, days) => {
    const header = document.getElementById('modal-header');
    const chartLoadingMsg = document.getElementById('chart-loading-msg');
    const chartCanvas = document.getElementById('coin-chart');

    if (!header || !chartLoadingMsg || !chartCanvas) return;

    header.innerHTML = '<h2>Loading...</h2>';
    chartLoadingMsg.textContent = 'Loading chart data...';
    chartLoadingMsg.style.display = 'block';
    chartCanvas.style.display = 'none';

    const MAX_RETRIES = 3;
    let lastError = null;

    for (let i = 0; i < MAX_RETRIES; i++) {
        try {
            let interval = (days == 1) ? 'hourly' : 'daily';

            const priceChartUrl = `https://api.coingecko.com/api/v3/coins/${coinId}/market_chart?vs_currency=usd&days=${days}&interval=${interval}`;
            const coinDataUrl = `https://api.coingecko.com/api/v3/coins/${coinId}?localization=false&tickers=false&market_data=true&community_data=false&developer_data=false&sparkline=false`;

            const [chartResponse, dataResponse] = await Promise.all([
                fetch(priceChartUrl),
                fetch(coinDataUrl)
            ]);

            if (!chartResponse.ok || !dataResponse.ok) {
                // Simplified error handling for rate limit or not found
                const status = chartResponse.status === 429 || dataResponse.status === 429 ? 429 : 404;
                if (status === 429) throw new Error('API Rate Limit Exceeded (429). Retrying...');
                else if (status === 404) throw new Error('Coin Not Found (404). Check ID.');
                else throw new Error(`API request failed. Status: ${chartResponse.status}/${dataResponse.status}`);
            }

            const chartData = await chartResponse.json();
            const coinDetails = await dataResponse.json();

            if (!chartData || !chartData.prices || chartData.prices.length === 0) {
                throw new Error("Received empty or invalid chart data structure.");
            }

            // --- 1. Modal header and main info ---
            const currentPrice = coinDetails.market_data.current_price.usd.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 });
            const marketCap = coinDetails.market_data.market_cap.usd.toLocaleString();
            const volume = coinDetails.market_data.total_volume.usd.toLocaleString();

            let changeKey = '';
            if (days == 1) changeKey = 'price_change_percentage_24h';
            else if (days == 7) changeKey = 'price_change_percentage_7d';
            else if (days == 30) changeKey = 'price_change_percentage_30d';
            else if (days == 180) changeKey = 'price_change_percentage_200d';

            const changePercent = coinDetails.market_data[`${changeKey}_in_currency`]?.usd?.toFixed(2);
            const isNumericChange = !isNaN(parseFloat(changePercent));
            const isPositive = isNumericChange && parseFloat(changePercent) >= 0;

            const changeDisplay = (days == 180) ? '6m' : `${days}d`;

            const changeHtml = (isNumericChange) ? `
                <span class="change-info ${isPositive ? 'positive' : 'negative'}">
                    ${isPositive ? '▲' : '▼'} ${Math.abs(changePercent)}% (${changeDisplay})
                </span>` : '<span class="change-info neutral">N/A</span>';

            // Update Header
            header.innerHTML = `
                <img src="${coinDetails.image.small}" alt="${coinDetails.name} Icon" class="coin-icon-modal">
                <h1>${coinDetails.name} (${coinDetails.symbol.toUpperCase()})</h1>
                <div style="display: flex; align-items: center; gap: 1rem; margin-left: auto;">
                    <p class="current-price-modal">$${currentPrice}</p>
                    ${changeHtml}
                </div>
            `;

            // Update additional stats
            document.getElementById('market-cap-value').textContent = `$${marketCap}`;
            document.getElementById('volume-value').textContent = `$${volume}`;

            // --- 2. Draw Chart ---
            chartLoadingMsg.style.display = 'none';

            const prices = chartData.prices.map(p => p[1]);
            const labels = chartData.prices.map(p => {
                const date = new Date(p[0]);
                return (days == 1) ? date.toLocaleTimeString() : date.toLocaleDateString();
            });

            if (chartInstance) chartInstance.destroy(); // Destroy previous chart

            if (window.Chart && prices.length > 0) {
                chartCanvas.style.display = 'block';

                const chartColor = isPositive ? 'rgba(76, 175, 80, 1)' : 'rgba(244, 67, 54, 1)';
                const backgroundColor = isPositive ? 'rgba(76, 175, 80, 0.2)' : 'rgba(244, 67, 54, 0.2)';

                chartInstance = new Chart(chartCanvas, {
                    type: 'line',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: `${coinDetails.name} Price (USD)`,
                            data: prices,
                            borderColor: chartColor,
                            borderWidth: 2,
                            pointRadius: 0,
                            fill: true,
                            backgroundColor: backgroundColor,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            x: { display: true, ticks: { maxTicksLimit: 7 }, grid: { color: 'rgba(255, 255, 255, 0.1)' } },
                            y: { beginAtZero: false, grid: { color: 'rgba(255, 255, 255, 0.1)' } }
                        },
                        plugins: { legend: { display: false } }
                    }
                });
            } else {
                chartCanvas.style.display = 'none';
                chartLoadingMsg.textContent = window.Chart ? "No chart data available for this range." : "Error: Chart.js library is not loaded.";
                chartLoadingMsg.style.display = 'block';
            }

            return; // Exit retry loop on success

        } catch (error) {
            lastError = error;
            console.warn(`Attempt ${i + 1} failed. Retrying...`, error.message);
            if (i < MAX_RETRIES - 1) {
                await new Promise(resolve => setTimeout(resolve, 1000 * (2 ** i)));
            }
        }
    }

    // If all retries failed
    console.error("All API fetch attempts failed:", lastError);
    if (header) header.innerHTML = `<h2>Error Loading Data</h2>`;
    if (chartLoadingMsg) chartLoadingMsg.textContent = `Failed to load chart or details. Reason: ${lastError ? lastError.message : 'Unknown Error'}`;
    if (chartCanvas) chartCanvas.style.display = 'none';
};


/**
 * =================================================================
 * VII. EVENT LISTENERS (DOM Content Loaded)
 * =================================================================
 * The main entry point for script execution once the DOM is ready.
 */
document.addEventListener('DOMContentLoaded', () => {
    // 1. Initialize Language and Theme from Local Storage
    const storedLanguage = localStorage.getItem('selectedLanguage') || 'fr';
    setLanguage(storedLanguage);

    const storedTheme = localStorage.getItem('selectedTheme') || 'dark';
    setTheme(storedTheme);

    // 2. Start Slideshow for Hero Section
    if (document.querySelector('.hero')) {
        showSlides();
    }

    // 3. Attach Event Listeners for Language & Theme Switches
    document.querySelectorAll('.lang-switcher').forEach(button => {
        button.addEventListener('click', (e) => {
            const lang = e.target.getAttribute('data-lang');
            if (lang) setLanguage(lang);
        });
    });

    document.querySelectorAll('.theme-btn').forEach(button => {
        button.addEventListener('click', (e) => {
            const theme = e.target.getAttribute('data-theme');
            if (theme) setTheme(theme);
        });
    });

    // 4. Run Page-Specific Data Fetchers
    // (Assuming 'highlightActiveCategory' is a globally defined function that exists)
    // highlightActiveCategory();

    if (document.getElementById('crypto-dashboard')) {
        fetchCryptoPageData();
    }
    if (document.getElementById('stocks-dashboard')) {
        fetchStockPageData();
    }
    if (document.getElementById('tech-dashboard')) {
        fetchTechPageData();
    }
    if (document.getElementById('energy-dashboard')) {
        fetchEnergyPageData();
    }
    if (document.getElementById('webdev-dashboard')) {
        fetchWebDevPageData();
    }

    // 5. Initialize Blog Filtering and News Fetching (if on blog page)
    if (document.querySelector('.blog-grid')) {
        filterBlogPosts();

        // Group cards by category and fetch news for each
        const cards = document.querySelectorAll(".blog-card");
        const categories = {};
        cards.forEach(card => {
            const cat = card.dataset.category;
            if (cat && !categories[cat]) categories[cat] = [];
            if (cat) categories[cat].push(card);
        });

        Object.entries(categories).forEach(([category, cardList]) => {
            if (apis[category]) {
                fetchNews(category, apis[category], cardList);
            }
        });
    }

    // 6. Modal Close Handler (Click outside the modal)
    window.onclick = function (event) {
        if (event.target === coinDetailModal) {
            closeCoinModal();
        }
    };
});



// this is for active or hover  menue in blog page
/**
 * Adds the 'active' CSS class to the appropriate menu link based on the current URL.
 */
function highlightActiveMenu() {
    // 1. Get the current page's full URL.
    const currentUrl = window.location.href; 
    
    // 2. Select all links within the navigation list.
    const menuLinks = document.querySelectorAll('#blog-categories a'); 

    // 3. Loop through each link.
    menuLinks.forEach(link => {
        const linkUrl = link.href;

        // 4. Compare: Check if the current page URL includes the menu link's URL.
        // This is done to reliably match links even with different protocols or subdomains.
        if (currentUrl.includes(linkUrl)) {
            // 5. If it matches, set this link as 'active'.
            link.classList.add('active');
        } else {
            // Otherwise, ensure the active state is removed.
            link.classList.remove('active');
        }
    });
}

// Execute the function immediately after the entire page content is loaded.
document.addEventListener('DOMContentLoaded', highlightActiveMenu);



// fetch function for  crypto news in blog page

async function fetchCryptoNews() {
    const newsContainer = document.getElementById('crypto-news');
    
    try {
        // ۱. دریافت داده‌ها از API
        const response = await fetch('https://min-api.cryptocompare.com/data/v2/news/?lang=EN');
        const data = await response.json();
        
        // ۲. پاک کردن متن "Loading data..."
        newsContainer.innerHTML = '';

        // ۳. انتخاب ۵ خبر آخر و نمایش آن‌ها
        const articles = data.Data.slice(0, 5); 

        articles.forEach(article => {
            const newsItem = `
                <div class="news-item" style="margin-bottom: 15px;">
                    <a href="${article.url}" target="_blank" style="text-decoration: none; color: inherit;">
                        <img src="${article.imageurl}" alt="news" style="width: 50px; height: 50px; border-radius: 5px; float: left; margin-right: 10px;">
                        <h4 style="margin: 0; font-size: 14px;">${article.title}</h4>
                        <small style="color: #888;">${new Date(article.published_on * 1000).toLocaleDateString()}</small>
                    </a>
                    <div style="clear: both;"></div>
                </div>
            `;
            newsContainer.innerHTML += newsItem;
        });

    } catch (error) {
        console.error('Error fetching news:', error);
        newsContainer.innerHTML = '<p>Error loading news. Please try again later.</p>';
    }
}

// اجرای تابع هنگام لود شدن صفحه
document.addEventListener('DOMContentLoaded', fetchCryptoNews);




// section of home page in blog page


const NEWS_API_KEY = 'a4e806c62e9740abaede4f54f9bedb6f';

async function updateAllSections() {
    // 1. CRYPTO BLOCK (Using CryptoCompare - Free & No Key needed for this)
fetchNewsAPI('bitcoin market analysis', 'crypto');

    // 2. WEB DEV CARD (Using Dev.to API - Best for coding content)
    fetchDevToArticle();

    // 3. REMAINING CARDS (Using your NewsAPI Key)
    // Energy Section
    fetchNewsAPI('renewable energy engineering', 'energy');
    // Tech News Section
    fetchNewsAPI('artificial intelligence coding', 'tech-news');
    // Stocks Section
    fetchNewsAPI('stock market investing', 'stocks');
    
}

// --- Specialized Fetchers ---

async function fetchCryptoNews() {
    try {
        const response = await fetch('https://min-api.cryptocompare.com/data/v2/news/?lang=EN');
        const data = await response.json();
        const container = document.getElementById('crypto-news');
        container.innerHTML = data.Data.slice(0, 5).map(news => `
            <div class="news-item" style="margin-bottom:12px; display:flex; align-items:center; gap:10px;">
                <img src="${news.imageurl}" style="width:40px; height:40px; border-radius:4px;">
                <a href="${news.url}" target="_blank" style="font-size:13px; text-decoration:none; color:inherit; font-weight:500;">
                    ${news.title.substring(0, 60)}...
                </a>
            </div>
        `).join('');
    } catch (err) { console.error("Crypto API Error", err); }
}

async function fetchDevToArticle() {
    try {
        const response = await fetch('https://dev.to/api/articles?tag=webdev&per_page=1');
        const data = await response.json();
        if(data[0]) populateCard(data[0], 'webdev', 'Dev.to');
    } catch (err) { console.error("Dev.to API Error", err); }
}

async function fetchNewsAPI(query, category) {
    try {
        const response = await fetch(`https://newsapi.org/v2/everything?q=${encodeURIComponent(query)}&language=en&pageSize=1&apiKey=${NEWS_API_KEY}`);
        const data = await response.json();
        if(data.articles && data.articles[0]) {
            populateCard(data.articles[0], category, 'NewsAPI');
        }
    } catch (err) { console.error(`NewsAPI Error (${category}):`, err); }
}

// --- UI Helper ---

function populateCard(article, category, source) {
    const card = document.querySelector(`.blog-card[data-category="${category}"]`);
    if (!card) return;

    // 1. IMPROVED IMAGE LOGIC: Check all possible image fields
    const image = article.urlToImage ||          // NewsAPI field
                  article.cover_image ||         // Dev.to main image
                  article.social_image ||        // Dev.to fallback
                  'https://images.unsplash.com/photo-1498050108023-c5249f4df085?auto=format&fit=crop&w=600&q=80'; // High-quality fallback

    const title = article.title;
    const url = article.url;
    const rawDate = article.publishedAt || article.published_at || article.published_timestamp;
    const formattedDate = new Date(rawDate).toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' });
    const description = article.description || "Read the latest updates regarding this topic.";

    // Update the DOM
    const imgElement = card.querySelector('img');
    imgElement.src = image;
    
    // Add an error handler in case the API image link is broken
    imgElement.onerror = function() {
        this.src = 'https://via.placeholder.com/600x400?text=Image+Not+Found';
    };

    card.querySelector('h3').innerText = title;
    card.querySelector('.post-date').innerText = `${category.toUpperCase()} | ${formattedDate}`;
    card.querySelector('p:not(.post-date)').innerText = description.substring(0, 100) + '...';
    card.querySelector('.read-more').href = url;
}

// Start the process
document.addEventListener('DOMContentLoaded', updateAllSections);
